# ðŸ€ NBA Point Differential & Win Prediction Analysis

> âš ï¸ **Disclaimer:** This project was generated by Cursor AI as an exercise to explore AI coding capabilities. Predictions are statistical estimates based on historical data â€” not guarantees. Do not use for betting or financial decisions. The author takes no responsibility for any inaccuracies.

A comprehensive Python tool for analyzing the relationship between NBA team point differential and winning percentage, with interactive prediction capabilities.

## ðŸ“‹ Features

1. **Data Collection**: Automatically fetches NBA team season data using the official NBA API
2. **Statistical Analysis**: Performs linear regression to model the relationship between point differential and winning percentage
3. **Visualization**: Creates beautiful plots showing historical data and trends
4. **Interactive Predictor**: 
   - Command-line tool for quick predictions
   - Streamlit web app for advanced interactive analysis
5. **Quartile Analysis**: Analyze early-season point differential to predict final season outcomes

## ðŸš€ Quick Start

### Installation

1. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

### Running the Analysis

#### Option 1: Command-Line Script (Simple)

Run the basic analysis with interactive command-line predictor:

```bash
python pd_wp_analysis.py
```

This will:
- Fetch NBA data for the last 30 seasons (~900 team-seasons for robust analysis)
- Perform linear regression analysis
- Create and save visualizations
- Launch an interactive predictor where you can enter point differentials

**Example interaction:**
```
Point differential per game: 5.0

  ðŸ“ˆ Predicted Win%: 61.2%
  ðŸ† Expected Wins: 50.2
  ðŸ“‰ Expected Losses: 31.8
  ðŸ“Š Record: 50-32
```

#### Option 2: Streamlit Web App (Advanced)

For a full interactive web interface:

```bash
streamlit run streamlit_app.py
```

This launches a web app with:
- ðŸ“ˆ Interactive win predictor with sliders
- ðŸŽ¯ Interactive scatter plots (hover for details)
- ðŸ“‹ Data explorer with filtering
- ðŸ§® Quartile analysis for early-season predictions
- ðŸ“¥ Data download capabilities

## ðŸ“Š What Gets Created

### Files Generated:
1. **`nba_point_diff_analysis.png`** - Scatter plot with regression line
2. **`nba_team_seasons_processed.csv`** - Full dataset with calculated metrics

### Metrics Calculated:
- Point differential per game
- Winning percentage
- Points per game (PPG)
- Opponent points per game
- Expected wins based on point differential

## ðŸ”¬ The Analysis

### Key Findings

The analysis typically shows:
- **RÂ² â‰ˆ 0.94+**: Point differential explains ~94% of variance in winning percentage
- **~2.7 wins per point differential**: Each point of differential translates to approximately 2.7 wins over an 82-game season
- **Strong linear relationship**: The relationship is remarkably consistent across all teams and seasons

### Regression Model

```
Win% = Intercept + Slope Ã— Point Differential per Game
```

For an 82-game season:
```
Expected Wins = Win% Ã— 82
```

## ðŸ“ˆ Use Cases

### 1. **Team Evaluation**
Evaluate team performance beyond simple win-loss record:
```python
# A team with +5.0 point differential
# Expected: ~50 wins (61% win rate)
```

### 2. **Early Season Predictions**
Use point differential early in the season to predict final outcomes:
- After 20 games: Get reasonably accurate projections
- More games = more accurate predictions
- Less noisy than pure win-loss record early on

### 3. **Playoff Contention Analysis**
Determine if a team is over/underperforming:
- Actual wins > Expected wins = "Lucky" (regression incoming?)
- Actual wins < Expected wins = "Unlucky" (improvement likely?)

### 4. **Trade Impact Analysis**
Project how roster changes might affect point differential and thus wins

## ðŸŽ¯ Advanced: Quartile Analysis

The quartile analysis feature addresses a key insight: **early-season win-loss records can be misleading, but point differential is more stable.**

### The Problem
After 10 games, a team might be 7-3 or 3-7, but:
- Small sample sizes create noise
- Close games can swing either way
- Luck plays a larger role

### The Solution
Point differential smooths out the noise:
- A team that's 5-5 but with +8 point differential is likely better than their record
- A team that's 8-2 but with +1 point differential might be lucky

### Using the Quartile Feature

In the Streamlit app:
1. Go to "Quartile Analysis" tab
2. Enter games played so far
3. Enter current point differential
4. Get projected final season record

**Example:**
```
Games Played: 20
Current Point Diff: +6.5
â†’ Projected Final Record: 52-30
```

## ðŸ§® Statistical Notes

### Why Point Differential Works

1. **Score Differential is Predictive**: Teams that consistently outscore opponents win more
2. **Regression to Mean**: Point differential is more stable than discrete wins/losses
3. **Less Influenced by Luck**: Close game outcomes have high variance; point differential averages them out

### Model Limitations

- Assumes consistent performance throughout season
- Doesn't account for:
  - Injuries
  - Trade deadline moves
  - Tanking behavior
  - Playoff rotations vs regular season
  - Strength of schedule changes

## ðŸ“¦ Data Source

Data is fetched from the official **NBA Stats API** via the `nba_api` Python package:
- Regular season data only
- Team-level aggregated stats
- Multiple seasons (default: last 30 years, ~900 team-seasons for robust analysis)

## ðŸ› ï¸ Customization

### Fetch More Seasons

The default is 30 seasons for robust analysis (~900 data points). To fetch more historical data:

**In `pd_wp_analysis.py`:**
```python
# In main() function, change num_seasons parameter:
df = fetch_team_season_data(num_seasons=40)  # Fetch 40 seasons instead of 30
```

**In `streamlit_app.py`:**
- Use the slider in the sidebar (default: 30, can go up to 40)

**Note:** NBA API has reliable data back to ~1980, so you can fetch up to ~45 seasons if desired. More data = better model accuracy!

### Adjust Games in Season

For partial season analysis:
```python
result = predict_wins(model, point_diff, games=41)  # Half season
```

## ðŸ¤ Contributing Ideas

Future enhancements could include:
- [ ] Game-by-game data fetching for true quartile analysis
- [ ] Opponent strength adjustment
- [ ] Home/away splits
- [ ] Conference-specific models
- [ ] Playoff probability calculator
- [ ] Real-time data updates during season
- [ ] Player impact analysis

## ðŸ“š References

- Point differential as a predictive metric: [Basketball Reference](https://www.basketball-reference.com/)
- Pythagorean expectation in basketball
- NBA API documentation: [nba_api GitHub](https://github.com/swar/nba_api)

## ðŸ“ License

This project is open source and available for educational and personal use.

## ðŸ› Troubleshooting

**Problem**: API rate limiting errors
- **Solution**: The script includes 0.6s delays between requests. If issues persist, increase the sleep time.

**Problem**: Missing data for certain seasons
- **Solution**: The NBA API has reliable data back to ~1980. Very old seasons (pre-1980) may have incomplete data. Default of 30 seasons (1994-present) is recommended for best balance of data quality and quantity.

**Problem**: Installation issues
- **Solution**: Use a virtual environment:
  ```bash
  python -m venv venv
  source venv/bin/activate  # On Windows: venv\Scripts\activate
  pip install -r requirements.txt
  ```

## ðŸ“§ Questions?

This tool provides a robust framework for NBA win prediction. Experiment with different scenarios and enjoy exploring the data!

---

**Happy Analyzing! ðŸ€ðŸ“Š**

